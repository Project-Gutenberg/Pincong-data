---
layout: default
Lastmod: 2020-11-11T15:26:42.994270+00:00
date: 2020-11-10T00:00:00.000Z
title: "【小技巧】解决品葱“编辑回复时空行回车数量突增一倍”的方法"
author: "习羊羊与灰战狼"
tags: [膜乎,品葱,Bug,技术,技巧]
---

**（开门见山，直接说解决方法）**  
一、下载一个支持正则表达式的文本编辑器，如果你有就打开。(windows推荐notepad++， mac推荐textmate)  
二、把空行数量翻倍后的编辑内容复制进去，点击ctrl+f（打开“查找与替换”功能），勾上"正则表达式"(regular expression)。  
  
这里分为两种方法，取决于你的需要。  
  
如果你想要删除其中 1/2 的空行：  
在查找栏输入“^\\R{2}”，替换栏留空，点击“全部替换”。（以此类推，如果你想要删除 1/n 的空行，就把{2}的2改成数字n）  
  
如果你想把所有多出来的空行推倒重来，强制让每行之间间隔为1：  
1\. 在查找栏输入“^\\R”，替换栏留空，点击“全部替换”。  
2\. 上栏输入“^”，下栏输入"\\n"，点击“全部替换”。  
  
完成。  
注意事项：  
1\. 是左斜线（\\）而不是右斜线（/）  
2\. 如果某些“空行”没有被删掉，可能是因为它上面有空格  

* * *

  
**（前情提要）**  
四个半月前，我曾经在膜乎[反馈](https://mohu.rocks/question/10147 "https://mohu.rocks/question/10147")过这个bug。也有[其他用户](https://mohu.rocks/question/10744 "https://mohu.rocks/question/10744")反馈过。评论区也有用户说自己遇到过。其实这个bug膜乎品葱都有，因为都是用的一套代码。  
我当时对此bug的描述：  

> 我正在编辑一篇已经发出去的文字。  
>   
> 我正要删除一个（编辑前就有的）回车。  
>   
> 当我删除了这个回车后，所有其它回车的数量都翻了倍。  
>   
> 本来没有间距的两行文字之间出现了一行间距；只有一行间距的变成了两行；两行间距的变成了四行。

  
另一位用户对此的描述：  

> 有时候突开「修宪」，然后定位到我要修改的地方，用朕的一指禅按下 BackSpace 键后，突然多出一大堆空行……尤其是长文修改，这是坠痛苦的，只好刷新重来（怀疑是 CRLF 的问题）

  
相信在座各位也有不少曾遇到过这个bug吧！自己正编辑着问题/文章/评论，正想删掉一个链接，结果一点下backspace，链接没删掉，倒是之前的每行都多出了一个回车。手动一个一个删那些多处来的空格实在是太痛苦了。  
一般来说，我们的第一反应是“撤回到上一步”或者“刷新界面重来”。这两个做法效果都不理想。  

* * *

  
**（解释每一步替换是干什么的）**  

> 在查找栏输入“^\\R{2}”，替换栏留空，点击“全部替换”。

  
这一步会消除每两个空行中的其中一个。  
  

> 1\. 在查找栏输入“^\\R”，替换栏留空，点击“全部替换”。

  
这一步会消除所有空行。  
  

> 2\. 上栏输入“^”，下栏输入"\\n"，点击“全部替换”。

  
这一步会在所有已存在行的起首添加一个回车。





> [点击品葱原文参与讨论](https://pincong.rocks/article/26153)

